// Event Calendar
function init_calendar(){if(null!=document.getElementById("calendar_events")){var e=document.getElementById("calendar_events").value,t=[];if($.parseJSON(e).forEach(function(e,n){var a=e.event_date_time.split("-"),l=a[0],r=a[1];t.push({title:e.event_name,desc:e.event_details,start:new Date(l),end:new Date(r)})}),void 0===$.fn.fullCalendar)return;var n,a=new Date,l=(a.getDate(),a.getMonth(),a.getFullYear(),$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listMonth"},selectable:!0,selectHelper:!0,displayEventTime:!1,select:function(e,t,a){$("#fc_create").click(),n=e,ended=t,$(".antosubmit").on("click",function(){var e=$("#title").val();return t&&(ended=t),$("#event_type").val(),e&&l.fullCalendar("renderEvent",{title:e,start:n,end:t,allDay:a},!0),$("#title").val(""),l.fullCalendar("unselect"),$(".antoclose").click(),!1})},events:t,eventClick:function(e,t,n){var a=moment(e.start).format("D"),r=moment(e.start).format("MMM"),d=moment(e.start).format("YYYY"),m=moment(e.end).format("D"),o=moment(e.end).format("MMM"),c=moment(e.end).format("YYYY");$("#fc_edit").click(),$(".modal").modal(),$("#CalenderModalEdit").modal("open"),$("#title2").html(e.title),$("#descr2").html(e.desc),$("#start").html(r+" "+a+" - "+d+" "+moment(e.start).format("HH")+":"+moment(e.start).format("mm")),$("#end").html(o+" "+m+" - "+c+" "+moment(e.end).format("HH")+":"+moment(e.end).format("mm")),$("#event_type").val(),$(".antosubmit2").on("click",function(){e.title=$("#title2").val(),e.desc=$("#descr2").val(),l.fullCalendar("updateEvent",e),$(".antoclose2").click()}),l.fullCalendar("unselect")},editable:!0}))}}$(document).ready(function(){init_calendar()});